# üìã PLAN DE R√âALISATION DU PROJET HOLITRIP

# ============================================================================
# PHASE 1 : CONCEPTION & ARCHITECTURE üèóÔ∏è
# ============================================================================

phase_1_conception:
  titre: "Conception & Architecture"
  statut: "en_cours"
  taches:
    - id: 1.1
      titre: "D√©finir les interfaces principales"
      statut: "en_cours"
      description: |
        Cr√©er les interfaces pour favoriser l'injection de d√©pendances et faciliter les tests
      interfaces_a_creer:
        - TransportService: "R√©cup√©rer les transports selon crit√®res"
        - HotelService: "R√©cup√©rer les h√¥tels selon crit√®res"
        - ActiviteService: "R√©cup√©rer les activit√©s selon crit√®res"
        - GeocodingService: "Convertir adresses ‚Üí coordonn√©es GPS"
        - DistanceService: "Calculer distances (formule Haversine)"
        - ForfaitService: "Assembler et g√©n√©rer les forfaits"
      
    - id: 1.2
      titre: "Cr√©er les mod√®les de donn√©es (DTOs)"
      statut: "non_commence"
      modeles_a_creer:
        - Trajet:
            proprietes:
              - villeDepart: String
              - villeArrivee: String
              - dateHeureDepart: LocalDateTime
              - dateHeureArrivee: LocalDateTime
              - mode: "AVION | TRAIN"
              - prix: double
        
        - Hotel:
            proprietes:
              - adresse: String
              - ville: String
              - note: "int (1-5 √©toiles)"
              - prixParNuit: double
        
        - Activite:
            proprietes:
              - adresse: String
              - date: LocalDate
              - categorie: "EXPOSITION | SPORT | MUSIQUE | etc."
              - prix: double
        
        - Voyage:
            proprietes:
              - trajets: "List<Trajet> (1+ pour correspondances)"
              - direct: boolean
        
        - Forfait:
            proprietes:
              - voyageAller: Voyage
              - voyageRetour: Voyage
              - hotel: Hotel
              - activites: "List<Activite>"
              - erreurs: "List<String>"
        
        - CriteresRecherche:
            proprietes:
              - villeDepart: String
              - villeDestination: String
              - dateDepart: LocalDate
              - dureeSejourJours: int
              - budgetMaximal: double
              - preferenceTransport: "AVION | TRAIN | null"
              - prioriteTransport: "PRIX | DUREE"
              - noteMinimaleHotel: "Integer (null = sans pr√©f√©rence)"
              - prioriteHotel: "PRIX | ETOILES"
              - categoriesActivites: "Set<CategorieActivite>"
              - distanceMaxActivite: "Double (km, null = sans pr√©f√©rence)"

# ============================================================================
# PHASE 2 : DONN√âES FACTICES üìÅ
# ============================================================================

phase_2_donnees:
  titre: "Cr√©ation des donn√©es de test"
  statut: "non_commence"
  taches:
    - id: 2.1
      titre: "Cr√©er fichier transports.json"
      statut: "non_commence"
      contenu_minimum:
        - Plusieurs villes: "Paris, Bordeaux, Lyon, Rennes, Marseille, Toulouse"
        - Modes: "AVION et TRAIN"
        - Dates vari√©es: "sur 1-2 mois"
        - Prix vari√©s: "50‚Ç¨ √† 300‚Ç¨"
        - Correspondances possibles: "Paris comme hub"
      exemple_structure: |
        [
          {
            "id": "T001",
            "villeDepart": "Bordeaux",
            "villeArrivee": "Paris",
            "dateHeureDepart": "2025-01-15T08:00:00",
            "dateHeureArrivee": "2025-01-15T10:30:00",
            "mode": "TRAIN",
            "prix": 85.0
          }
        ]
    
    - id: 2.2
      titre: "Cr√©er fichier hotels.json"
      statut: "non_commence"
      contenu_minimum:
        - Villes: "M√™me villes que transports"
        - Notes: "1 √† 5 √©toiles"
        - Prix: "50‚Ç¨ √† 400‚Ç¨ par nuit"
        - Adresses compl√®tes: "Pour g√©ocodage"
      exemple_structure: |
        [
          {
            "id": "H001",
            "nom": "Grand Hotel",
            "adresse": "10 Place Bellecour, Lyon",
            "ville": "Lyon",
            "note": 4,
            "prixParNuit": 120.0
          }
        ]
    
    - id: 2.3
      titre: "Cr√©er fichier activites.json"
      statut: "non_commence"
      contenu_minimum:
        - Cat√©gories: "EXPOSITION, SPORT, MUSIQUE, CULTURE, GASTRONOMIE, NATURE, SPECTACLE"
        - Dates: "Correspondre aux p√©riodes de s√©jour possibles"
        - Adresses: "Adresses r√©elles pour calcul distance"
        - Prix: "0‚Ç¨ (gratuit) √† 100‚Ç¨"
      exemple_structure: |
        [
          {
            "id": "A001",
            "nom": "Mus√©e du Louvre",
            "adresse": "Rue de Rivoli, 75001 Paris",
            "ville": "Paris",
            "date": "2025-01-15",
            "categorie": "CULTURE",
            "prix": 15.0
          }
        ]

# ============================================================================
# PHASE 3 : IMPL√âMENTATION üíª
# ============================================================================

phase_3_implementation:
  titre: "Impl√©mentation des services"
  statut: "non_commence"
  taches:
    - id: 3.1
      titre: "Impl√©menter services de lecture de donn√©es"
      statut: "non_commence"
      services:
        - TransportServiceImpl: "Lire transports.json + filtrer par crit√®res"
        - HotelServiceImpl: "Lire hotels.json + filtrer par note/ville"
        - ActiviteServiceImpl: "Lire activites.json + filtrer par cat√©gorie/date"
      dependances:
        - "Gson pour parsing JSON"
        - "Gestion des exceptions (fichier introuvable, JSON invalide)"
    
    - id: 3.2
      titre: "Impl√©menter service de g√©ocodage"
      statut: "non_commence"
      description: "Wrapper autour de geocode.maps (TP4)"
      implementation:
        - "GeocodingServiceImpl"
        - "Appel HTTP √† geocode.maps"
        - "Parsing de la r√©ponse JSON"
        - "Gestion erreurs (service indisponible, adresse introuvable)"
      note: "Ce service sera mock√© dans les tests unitaires !"
    
    - id: 3.3
      titre: "Impl√©menter service de calcul de distance"
      statut: "non_commence"
      description: "Formule d'Haversine pour distance √† vol d'oiseau"
      implementation:
        - "DistanceServiceImpl"
        - "M√©thode: calculerDistance(Coordonnees c1, Coordonnees c2) ‚Üí double (km)"
        - "Utiliser GeocodingService pour convertir adresses ‚Üí coordonn√©es"
      formule_haversine: |
        a = sin¬≤(ŒîœÜ/2) + cos œÜ1 ‚ãÖ cos œÜ2 ‚ãÖ sin¬≤(ŒîŒª/2)
        c = 2 ‚ãÖ atan2(‚àöa, ‚àö(1‚àía))
        d = R ‚ãÖ c  (R = 6371 km)
    
    - id: 3.4
      titre: "Impl√©menter logique m√©tier du ForfaitService"
      statut: "non_commence"
      exigences_a_implementer:
        - recherche_transports:
            - "Filtrer par mode (AVION/TRAIN/null)"
            - "G√©rer correspondances (temps min entre trajets)"
            - "Homog√©n√©it√©: aller en train ‚Üí tous trajets aller en train"
            - "Prioriser selon PRIX ou DUREE"
            - "En cas d'√©galit√©: utiliser crit√®re secondaire"
        
        - recherche_hotels:
            - "Filtrer par ville destination"
            - "Filtrer par note minimale"
            - "Prioriser selon PRIX ou ETOILES"
            - "En cas d'√©galit√©: utiliser crit√®re secondaire"
        
        - recherche_activites:
            - "Filtrer par ville destination"
            - "Filtrer par cat√©gories demand√©es"
            - "Filtrer par dates (pendant s√©jour)"
            - "Calculer distance h√¥tel-activit√© (si crit√®re d√©fini)"
            - "Exclure si > distanceMaxActivite"
            - "Pas 2 activit√©s √† la m√™me date"
            - "Maximiser le nombre d'activit√©s dans le budget"
        
        - generation_forfaits:
            - "Assembler: voyage aller + retour + h√¥tel + activit√©s"
            - "V√©rifier budget maximal"
            - "Retourner TOUS les forfaits valides"
            - "En cas d'erreur: retourner forfait avec liste d'erreurs"
      
      constantes_a_definir:
        - TEMPS_CORRESPONDANCE_MIN: "30 minutes (√† tester)"
        - TEMPS_CORRESPONDANCE_MAX: "4 heures (raisonnable)"

# ============================================================================
# PHASE 4 : TESTS UNITAIRES üß™
# ============================================================================

phase_4_tests_unitaires:
  titre: "Tests unitaires avec mocks/stubs"
  statut: "non_commence"
  principes:
    - "Convention AAA: Arrange, Act, Assert"
    - "Nommage explicite: devraitRetournerVoyageQuandTransportsDisponibles()"
    - "Isoler avec mocks: GeocodingService, lecture fichiers"
    - "Tester cas nominaux ET cas d'erreur"
  
  taches:
    - id: 4.1
      titre: "Tests TransportService"
      fichier: "TransportServiceTest.java"
      tests_a_ecrire:
        - "devraitRetournerTransportsCorrespondantAuMode()"
        - "devraitRetournerListeVideSiAucunTransportTrouve()"
        - "devraitFiltrerParDateDepart()"
        - "devraitGererExceptionLectureFichier()"
    
    - id: 4.2
      titre: "Tests HotelService"
      fichier: "HotelServiceTest.java"
      tests_a_ecrire:
        - "devraitRetournerHotelsDansVille()"
        - "devraitFiltrerParNoteMinimale()"
        - "devraitRetournerListeVideSiVilleInconnue()"
    
    - id: 4.3
      titre: "Tests ActiviteService"
      fichier: "ActiviteServiceTest.java"
      tests_a_ecrire:
        - "devraitFiltrerParCategories()"
        - "devraitFiltrerParPeriodeDates()"
        - "devraitRetournerToutesActivitesSiAucuneCategorie()"
    
    - id: 4.4
      titre: "Tests DistanceService"
      fichier: "DistanceServiceTest.java"
      mocks_utilises:
        - "GeocodingService (mock√© avec Mockito)"
      tests_a_ecrire:
        - "devraitCalculerDistanceCorrectementAvecHaversine()"
        - "devraitGererExceptionQuandGeocodingEchoue()"
        - "devraitRetournerZeroSiMemesCoordonnees()"
    
    - id: 4.5
      titre: "Tests ForfaitService (CRITIQUE)"
      fichier: "ForfaitServiceTest.java"
      mocks_utilises:
        - "TransportService (stub avec donn√©es factices)"
        - "HotelService (stub)"
        - "ActiviteService (stub)"
        - "DistanceService (mock)"
      
      tests_exigences:
        - correspondances:
            - "devraitCreerVoyageAvecCorrespondanceValide()"
            - "devraitRejeterCorrespondanceTropCourte()"
            - "devraitRejeterCorrespondanceTropLongue()"
        
        - homogeneite_transport:
            - "devraitAccepterAllerTrainRetourAvion()"
            - "devraitRejeterVoyageAvecTrainEtAvionMelanges()"
        
        - priorites:
            - "devraitChoisirTransportMoinsCherQuandPrioritePrix()"
            - "devraitChoisirTransportPlusRapideQuandPrioriteDuree()"
            - "devraitUtiliserCritereSecondaireEnCasEgalite()"
            - "devraitChoisirHotelMoinsCherQuandPrioritePrix()"
            - "devraitChoisirHotelPlusEtoilesQuandPrioriteEtoiles()"
        
        - activites:
            - "devraitExclureActivitesTropLoin()"
            - "devraitMaximiserNombreActivites()"
            - "devraitRejeterDeuxActivitesMemeDate()"
        
        - budget:
            - "devraitRespecterBudgetMaximal()"
            - "devraitRetournerListeVideSiBudgetInsuffisant()"
        
        - erreurs:
            - "devraitRetournerForfaitAvecErreursQuandServiceIndisponible()"
            - "devraitRetournerForfaitAvecErreursQuandCriteresInsatisfiables()"
            - "devraitRetournerForfaitAvecErreursQuandAucunTransport()"
      
      valeurs_limites:
        - "Budget exact (√©galit√©)"
        - "Note h√¥tel = 1 et = 5"
        - "Distance = 0 km et = distanceMax"
        - "Dur√©e s√©jour = 1 jour"
        - "Aucune activit√©"
    
    - id: 4.6
      titre: "Ex√©cuter tests unitaires"
      commande: "mvn test"
      objectif: "Tous les tests passent ‚úÖ"

# ============================================================================
# PHASE 5 : COUVERTURE DE CODE üìä
# ============================================================================

phase_5_couverture:
  titre: "Analyse et am√©lioration de la couverture"
  statut: "non_commence"
  taches:
    - id: 5.1
      titre: "G√©n√©rer rapport JaCoCo"
      commande: "mvn clean test"
      rapport: "target/site/jacoco/index.html"
    
    - id: 5.2
      titre: "Analyser la couverture"
      metriques:
        - instructions: "Objectif: ‚â• 80%"
        - branches: "Objectif: ‚â• 80%"
      actions:
        - "Identifier lignes/branches non couvertes"
        - "V√©rifier si pertinent de tester"
        - "Justifier si non pertinent (getters, DTOs, etc.)"
    
    - id: 5.3
      titre: "Compl√©ter tests pour am√©liorer couverture"
      focus:
        - "Branches conditionnelles non test√©es"
        - "Blocs catch d'exceptions"
        - "Cas limites oubli√©s"
      objectif: "Atteindre ‚â• 80% de couverture"
    
    - id: 5.4
      titre: "Documenter justifications"
      note: "Pour le rapport PDF"
      exemples_justifications:
        - "Getters/setters non test√©s: code trivial g√©n√©r√©"
        - "Constructeur vide: pas de logique √† tester"
        - "M√©thode toString(): affichage uniquement"
        - "Cas impossible: contraintes m√©tier garantissent non-atteignabilit√©"

# ============================================================================
# PHASE 6 : TESTS D'INT√âGRATION üîó
# ============================================================================

phase_6_tests_integration:
  titre: "Tests d'int√©gration end-to-end"
  statut: "non_commence"
  principe: "PAS de mocks - utiliser VRAIES impl√©mentations"
  
  taches:
    - id: 6.1
      titre: "Cr√©er sc√©narios d'int√©gration"
      fichier: "ForfaitServiceIT.java"
      note: "Suffixe IT pour d√©tection automatique par Maven"
      
      scenarios:
        - scenario_nominal:
            titre: "devraitCreerForfaitCompletAvecDonneesReelles()"
            description: |
              Recherche Paris‚ÜíLyon, 3 jours, budget 1000‚Ç¨
              - V√©rifie transports A/R trouv√©s
              - V√©rifie h√¥tel r√©serv√©
              - V√©rifie activit√©s ajout√©es
              - V√©rifie prix total ‚â§ budget
        
        - scenario_correspondance:
            titre: "devraitGererCorrespondancesAvecDonneesReelles()"
            description: "Bordeaux‚ÜíRennes via Paris"
        
        - scenario_distance:
            titre: "devraitFiltrerActivitesParDistanceReelle()"
            description: "Utiliser VRAI GeocodingService + calcul distance"
        
        - scenario_complet:
            titre: "devraitRetournerPlusieursForfaitsValides()"
            description: "V√©rifier que tous respectent les crit√®res"
    
    - id: 6.2
      titre: "Ex√©cuter tests d'int√©gration"
      commande: "mvn integration-test"
      prerequis:
        - "Fichiers JSON pr√©sents dans src/main/resources"
        - "Service geocode.maps accessible (ou version mock√©e globale)"
      objectif: "Tous les tests IT passent ‚úÖ"

# ============================================================================
# PHASE 7 : ANALYSE PAR MUTATION üß¨
# ============================================================================

phase_7_mutation:
  titre: "Tests de mutation avec PIT"
  statut: "non_commence"
  taches:
    - id: 7.1
      titre: "G√©n√©rer rapport PIT"
      commande: "mvn test-compile org.pitest:pitest-maven:mutationCoverage"
      rapport: "target/pit-reports/*/index.html"
      duree_estimee: "Peut √™tre long (5-15 min)"
    
    - id: 7.2
      titre: "Analyser mutants survivants"
      metriques:
        - mutation_coverage: "Objectif: ‚â• 70-80%"
      actions:
        - "Identifier chaque mutant survivant"
        - "D√©terminer pourquoi il a surv√©cu"
        - "V√©rifier s'il est √©quivalent ou non pertinent"
    
    - id: 7.3
      titre: "Ajouter tests pour tuer mutants"
      exemples_mutants:
        - conditions_limites:
            mutant: "< devient <="
            action: "Ajouter test avec valeur exacte (√©galit√©)"
        
        - operateurs_arithmetiques:
            mutant: "+ devient -"
            action: "V√©rifier calcul exact du r√©sultat"
        
        - retours_methodes:
            mutant: "return true devient return false"
            action: "Tester les deux branches explicitement"
        
        - increments:
            mutant: "i++ devient i--"
            action: "V√©rifier r√©sultat pr√©cis de la boucle"
    
    - id: 7.4
      titre: "Documenter mutants √©quivalents"
      note: "Pour le rapport PDF"
      exemples_justifications:
        - "Mutant √©quivalent: comportement identique √† l'original"
        - "Non pertinent m√©tier: cas impossible dans le domaine"
        - "Code d√©fensif: exception jamais lev√©e en pratique"

# ============================================================================
# PHASE 8 : RAPPORT & LIVRAISON üìù
# ============================================================================

phase_8_rapport:
  titre: "R√©daction rapport et pr√©paration livrable"
  statut: "non_commence"
  taches:
    - id: 8.1
      titre: "R√©diger rapport PDF (4-8 pages)"
      sections:
        - section_1:
            titre: "√âquipe"
            contenu: "Noms et pr√©noms des membres"
        
        - section_2:
            titre: "Architecture"
            contenu:
              - "Description des interfaces et services"
              - "Diagramme de classes"
              - "Diagramme de s√©quence (sc√©nario nominal)"
              - "Justification des choix de conception"
        
        - section_3:
            titre: "Manuel d'utilisation"
            commandes_a_documenter:
              - compilation: "mvn clean compile"
              - tests_unitaires: "mvn test"
              - tests_integration: "mvn integration-test"
              - couverture: "mvn clean test ‚Üí target/site/jacoco/index.html"
              - mutation: "mvn org.pitest:pitest-maven:mutationCoverage"
              - execution: "mvn exec:java ou java -jar ..."
            donnees_test: "D√©crire le jeu de donn√©es fourni"
        
        - section_4:
            titre: "Rapport de couverture"
            contenu:
              - "Capture √©cran scores globaux"
              - "Tableau scores par classe"
              - "% instructions couvertes"
              - "% branches couvertes"
              - "Justifications parties non couvertes"
        
        - section_5:
            titre: "Rapport de mutation"
            contenu:
              - "Capture √©cran score global"
              - "% mutants tu√©s"
              - "Liste mutants survivants avec justifications"
              - "Exemples de mutants √©quivalents"
        
        - section_6_optionnelle:
            titre: "Retour d'exp√©rience"
            contenu:
              - "Difficult√©s rencontr√©es"
              - "Solutions apport√©es"
              - "√âvaluation charge de travail"
              - "Pertinence du projet"
    
    - id: 8.2
      titre: "G√©n√©rer les rapports HTML finaux"
      actions:
        - "mvn clean test (JaCoCo)"
        - "mvn org.pitest:pitest-maven:mutationCoverage (PIT)"
        - "V√©rifier que rapports sont complets"
    
    - id: 8.3
      titre: "Pr√©parer l'archive finale"
      nom_fichier: "holitrip_equipe_NOM.zip ou .tar.gz"
      structure:
        - rapport.pdf: "Rapport au format PDF"
        - src/: "Code source complet"
        - pom.xml: "Configuration Maven"
        - target/site/jacoco/: "Rapport couverture HTML"
        - target/pit-reports/: "Rapport mutation HTML"
        - README.md: "Instructions"
      verification:
        - "Archive s'extrait correctement"
        - "Rapports HTML s'ouvrent dans navigateur"
        - "mvn test fonctionne apr√®s extraction"
    
    - id: 8.4
      titre: "Relecture finale"
      checklist:
        - "Rapport complet et sans fautes"
        - "Tous les diagrammes lisibles"
        - "Justifications claires"
        - "Archive contient tous les √©l√©ments"
        - "Tests passent tous"
        - "Code propre et comment√©"

# ============================================================================
# POINTS D'ATTENTION ‚ö†Ô∏è
# ============================================================================

points_critiques:
  evaluation_sur_tests:
    priorite: "MAXIMALE"
    note: "C'est la QUALIT√â des TESTS qui est √©valu√©e, pas les fonctionnalit√©s !"
    focus:
      - "Clart√© et intelligibilit√© des tests"
      - "Nommage explicite"
      - "Convention AAA respect√©e"
      - "Mocks/stubs utilis√©s judicieusement"
      - "Cas nominaux ET d'erreur"
  
  injection_dependances:
    importance: "CRITIQUE"
    raison: "N√©cessaire pour mocker dans les tests unitaires"
    implementation: "Passer services en param√®tre constructeur"
  
  convention_nommage:
    tests_unitaires: "*Test.java ‚Üí mvn test"
    tests_integration: "*IT.java ‚Üí mvn integration-test"
    importance: "Maven d√©tecte automatiquement"
  
  justifications:
    principe: "Mieux vaut un score moyen bien justifi√© qu'un score √©lev√© sans explication"
    ou_justifier:
      - "Code non couvert par tests"
      - "Mutants survivants"
      - "Choix de conception"
  
  travail_equipe:
    organisation: "R√©partir les interfaces entre membres d√®s le d√©but"
    parall√©lisation: "Chacun peut d√©velopper et tester son interface"
    integration: "Tester la collaboration ensuite"

# ============================================================================
# RESSOURCES üìö
# ============================================================================

ressources:
  cours_tp:
    - "Supports de cours (Moodle)"
    - "TP3: JaCoCo"
    - "TP4: Mocks et service externe (geocode.maps)"
    - "TP5: PIT (mutation)"
  
  documentation:
    - junit5: "https://junit.org/junit5/docs/current/user-guide/"
    - mockito: "https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html"
    - jacoco: "https://www.jacoco.org/jacoco/trunk/doc/"
    - pitest: "https://pitest.org/"
    - haversine: "https://en.wikipedia.org/wiki/Haversine_formula"
  
  outils_utiles:
    - diagrammes: "PlantUML, Draw.io, Lucidchart"
    - json_validation: "https://jsonlint.com/"

# ============================================================================
# CALENDRIER SUGG√âR√â (adaptable selon votre planning)
# ============================================================================

calendrier_suggere:
  note: "Pour un projet de 3-4 semaines"
  
  semaine_1:
    - "Phase 1: Interfaces + mod√®les"
    - "Phase 2: Donn√©es JSON"
    - "Phase 3: Impl√©mentations de base"
  
  semaine_2:
    - "Phase 4: Tests unitaires (priorit√©)"
    - "Phase 5: JaCoCo + am√©lioration couverture"
  
  semaine_3:
    - "Phase 6: Tests d'int√©gration"
    - "Phase 7: PIT + am√©lioration mutation"
  
  semaine_4:
    - "Phase 8: Rapport + revue finale"
    - "Relecture et livraison"

# ============================================================================
# FIN DU PLAN DE R√âALISATION
# ============================================================================
